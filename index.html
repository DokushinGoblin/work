<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>GitHub Pages Sample</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/marx/2.0.4/marx.css">
  </head>

  <body>
    <main>
      <h1>GitHub Pages Sample</h1>
      <a href="https://twitter.com/DokushinGoblin/"><button>Twitter</button></a>

      <div id="race_list">
    </main>

    <script>
      console.log('GitHub Pages Sample');
      const output_csv = document.getElementById('race_list');

      function csv_data(dataPath) {
          const request = new XMLHttpRequest(); // HTTPでファイルを読み込む
          request.addEventListener('load', (event) => { // ロードさせ実行
              const response = event.target.responseText; // 受け取ったテキストを返す
              // output_svg.innerHTML = response; // 表示
              csv_array(response, '\t');
          });
          request.open('GET', dataPath, true); // csvのパスを指定
          request.send();
      }

      function csv_array(data, dlm) {
          const dataArray = []; //配列を用意
          const dataString = data.split('\n'); //改行で分割
          for (let i = 0; i < dataString.length; i++) { //あるだけループ
              dataArray[i] = dataString[i].split(dlm);
          }
          output_csv.innerHTML = dataArray; //表示
          console.log(dataArray);

      }

      csv_data('botin.txt'); // csvのパス
    </script>

  </body>
</html>
